<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>auth with withings</title>
</head>
<body>
<h1>withings-bodyplus-googlesheets</h1>
<p>
    This service exists for personal use so it's liable to change or break at
    short notice. That said, I intend to use it myself for as long as I have a
    <a href="https://www.withings.com/us/en/body-plus">Withings Body+</a>
    smart scale, and you're free to make use of it to, provided you agree to
    the below terms and conditions and privacy policy.
</p>
<p>Any issues? Contact <a href="mailto:alex@not.gd">alex@not.gd</a></p>

<h1>Terms and conditions, privacy policy</h1>

<p>
    This service offers no guarantees of service. It may go offline or become
    access-restricted at any point
</p>
<p>
    Your Withings health data is never stored to disk, database, logfile. Only
    standard HTTP metadata (headers, IP address) is stored to log files. These
    log files may be retained indefinitely if I forget about them.
</p>

<label><input type="checkbox" name="agreeToTerms"> I agree</label>

<button type="button" id="authenticate">Authenticate</button>

<script>
  const clientId = '3f1b2f2211a58c6c49a558eb538bdcaf1852b295789776a0fd28aafc0ca13ee1';
  const state = '12345';
  const redirectUri = 'https://withings-bodyplus-googlesheets.not.gd/callback';
  const buttonID = document.getElementById('authenticate');
  buttonID.onclick = () => {
    location.href = `http://account.withings.com/oauth2_user/authorize2?response_type=code&client_id=${clientId}&state=${state}&scope=user.info,user.metrics,user.activity&redirect_uri=${redirectUri}&mode=demo`;
  }
</script>
</body>
</html>
